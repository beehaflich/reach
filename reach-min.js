var reach=function(){this.increment_=reach.increment_++};reach.increment_=0;reach.prototype.increment=function(){return this.increment_};reach.callbacks={};reach.prototype.callback=function(a){return arguments.length?(reach.callbacks[this.increment()]=a,this):reach.callbacks[this.increment()]};reach.prototype.url_=null;reach.prototype.url=function(a){return arguments.length?(this.url_=a||null,this):this.url_};
reach.prototype.arguments=function(a){if(arguments.length){this.arguments_=this.arguments_||{};for(var c in a)this.arguments_[c]=a[c];return this}return this.arguments_||{}};reach.stringify=function(a){return window.JSON?window.JSON.stringify(a):null};reach.stringify_polyfill_=function(a){};reach.prototype.stringify=function(a){return reach.stringify(a)};reach.prototype.parameter_="callback";reach.prototype.parameter=function(a){return arguments.length?(this.parameter_=a,this):this.parameter_};
reach.prototype.sent_=!1;reach.prototype.sent=function(){return this.sent_};
reach.prototype.send=function(){if(this.sent_)throw"JSONP Request already sent!";var a=this.url();if(!a)throw"URL is required to send a JSONP request";arguments=this.arguments();this.callback()&&(arguments[this.parameter()]="reach.callbacks["+this.increment()+"]");var c=[],b;for(b in arguments)c.push(encodeURIComponent(b)+"="+encodeURIComponent(arguments[b]));c.length&&(a=a+"?"+c.join("&"));c=document.head;if(!c)throw"Document seems to have been decapitated (missing <head>)";b=document.createElement("script");
b.type="text/javascript";b.src=a;b.dataset&&(b.dataset.requestSource="reach",b.dataset.increment=this.increment(),b.dataset.timestamp=Math.floor(Date.now()/1E3));c.appendChild(b);this.sent_=!0;return this};
